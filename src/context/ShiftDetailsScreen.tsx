import { View, Text, ScrollView, StyleSheet, Image, Linking } from 'react-native'
import React from 'react'
import { Shift } from './ShiftContext';
import { RouteProp } from '@react-navigation/native';

type RootStackParamList = {
    ShiftDetails: {shift: Shift};
};

type ShiftDetailsScreenRouteProp = RouteProp<RootStackParamList, 'ShiftDetails'>;

interface Props {
    route: ShiftDetailsScreenRouteProp;
}

const ShiftDetailsScreen: React.FC<any> = ({route}) => {
    const {shift} = route.params;

    return (
        <ScrollView style={styles.container}>
            <View style={styles.card}>
                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
                <View style={styles.header}>
                    {shift.logo && (
                        <Image source={{uri: shift.logo}} style={styles.logo}/>
                    )}
                    <View style={styles.titleContainer}>
                        <Text style={styles.companyName}>{shift.companyName}</Text>
                        <Text style={styles.workType}>{shift.workTypes}</Text>
                    </View>
                    <Text style={styles.price}>{shift.priceWorker} ‚ÇΩ</Text>
                </View>

                  {/* –ê–¥—Ä–µ—Å */}
                <View style={styles.section}>
                    <Text style={styles.sectionTitle}>–ê–¥—Ä–µ—Å</Text>
                    <Text style={styles.sectionContent}>{shift.address}</Text>
                </View>

                {/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}
                <View style={styles.section}>
                    <Text style={styles.sectionTitle}>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</Text>
                    <Text style={styles.sectionContent}>
                        {shift.dateStartByCity}
                    </Text>
                    <Text style={styles.sectionContent}>
                        {shift.timeStartByCity} - {shift.timeEndByCity}
                    </Text>
                </View>

                {/* –£—á–∞—Å—Ç–Ω–∏–∫–∏ */}
                <View style={styles.section}>
                    <Text style={styles.sectionTitle}>–£—á–∞—Å—Ç–Ω–∏–∫–∏</Text>
                    <Text style={styles.sectionContent}>
                        –ù–∞–±—Ä–∞–Ω–æ: {shift.currentWorkers} –∏–∑ {shift.planWorkers} —á–µ–ª–æ–≤–µ–∫
                    </Text>
                </View>

                {/* –†–µ–π—Ç–∏–Ω–≥ –∏ –æ—Ç–∑—ã–≤—ã */}
                <View style={styles.section}>
                    <Text style={styles.sectionTitle}>–†–µ–π—Ç–∏–Ω–≥ –Ω–∞–Ω–∏–º–∞—Ç–µ–ª—è</Text>
                    <View style={styles.ratingContainer}>
                        <Text style={styles.rating}>
                        ‚òÖ {shift.customerRating}/5
                        </Text>
                        <Text style={styles.reviews}>
                        ({shift.customerFeedbacksCount} –æ—Ç–∑—ã–≤–æ–≤)
                        </Text>
                    </View>
                </View>

                {/* –ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è */}
                <View style={styles.actionSection}>
                    <Text
                      style={styles.actionButton}
                      onPress={() => Linking.openURL('tel:+79999999999')}  
                    >
                        üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å –¥–ª—è –∑–∞–ø–∏—Å–∏    
                    </Text>
                </View>
            </View>
        </ScrollView>
    );
};

const styles = StyleSheet.create({
      container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  card: {
    backgroundColor: 'white',
    margin: 16,
    padding: 20,
    borderRadius: 12,
    shadowColor: '#000',
    shadowOffset: {width: 0, height: 2},
    shadowOpacity: 0.1,
    shadowRadius: 6,
    elevation: 3,
  },
  header: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    marginBottom: 20,
  },
  logo: {
    width: 60,
    height: 60,
    borderRadius: 8,
    marginRight: 12,
  },
  titleContainer: {
    flex: 1,
  },
  companyName: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#333',
    marginBottom: 4,
  },
  workType: {
    fontSize: 16,
    color: '#666',
  },
  price: {
    fontSize: 24,
    fontWeight: 'bold',
    color: '#2ecc71',
  },
  section: {
    marginBottom: 20,
  },
  sectionTitle: {
    fontSize: 16,
    fontWeight: '600',
    color: '#333',
    marginBottom: 8,
  },
  sectionContent: {
    fontSize: 16,
    color: '#666',
    lineHeight: 22,
  },
  ratingContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  rating: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#f39c12',
    marginRight: 8,
  },
  reviews: {
    fontSize: 16,
    color: '#666',
  },
  actionSection: {
    marginTop: 10,
  },
  actionButton: {
    fontSize: 18,
    fontWeight: '600',
    color: '#007AFF',
    textAlign: 'center',
    padding: 16,
    backgroundColor: '#f0f8ff',
    borderRadius: 8,
  },
});

export default ShiftDetailsScreen;